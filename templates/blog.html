{% extends "base.html" %}

{% block title %}Blog - SantBhagatRam{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/blog.css') }}">
{% endblock %}

{% block content %}
<div class="blog-container">
    <!-- Header -->
    <div class="blog-header">
        <h1 data-lang-blog="title">ब्लॉग</h1>
        <p data-lang-blog="subtitle">हमारे कार्यों, कार्यक्रमों और सेवा गतिविधियों के बारे में अपडेट</p>
    </div>

    <!-- Blog Posts Grid -->
    <div class="blog-posts-grid">
        {% if blogs %}
            {% for blog in blogs %}
            <article class="blog-card" id="blog-{{ blog.id }}">
                <a href="{{ url_for('blog_detail', blog_id=blog.id) }}" class="blog-card-link" aria-label="{{ blog.title }}">
                    <div class="blog-image">
                        {% if blog.image %}
                            <img src="{{ blog.image }}" alt="{{ blog.title }}">
                        {% else %}
                            <img src="{{ url_for('static', filename='images/1.jpeg') }}" alt="Blog Post">
                        {% endif %}
                    </div>
                    <div class="blog-content">
                        <div class="blog-meta">
                            <span class="blog-date" data-lang-blog="datePrefix">दिनांक:</span>
                            <span class="blog-date-value" data-lang-blog-date-hi="{{ blog.date }}" data-lang-blog-date-en="{{ blog.dateEn }}">{{ blog.date }}</span>
                            <span class="blog-category" data-lang-blog-category-hi="{{ blog.category }}" data-lang-blog-category-en="{{ blog.categoryEn }}">{{ blog.category }}</span>
                        </div>
                        <h2 class="blog-title" data-lang-blog-title-hi="{{ blog.title }}" data-lang-blog-title-en="{{ blog.titleEn }}">{{ blog.title }}</h2>
                        <p class="blog-excerpt" data-lang-blog-excerpt-hi="{{ blog.excerpt }}" data-lang-blog-excerpt-en="{{ blog.excerptEn }}">{{ blog.excerpt }}</p>
                    </div>
                </a>
            </article>
            {% endfor %}
        {% else %}
            <div class="empty-blog-state">
                <p>No blogs available yet. Check back soon!</p>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    // Ensure translations are applied after page loads
    document.addEventListener('DOMContentLoaded', function() {
        setTimeout(function() {
            if (window.applyLanguage) {
                const lang = window.getCurrentLanguage ? window.getCurrentLanguage() : 'hi';
                window.applyLanguage(lang);
            }
        }, 300);
        
    });
    
    window.addEventListener('load', function() {
        setTimeout(function() {
            if (window.applyLanguage) {
                const lang = window.getCurrentLanguage ? window.getCurrentLanguage() : 'hi';
                window.applyLanguage(lang);
            }
        }, 200);
        
        // Scroll to specific blog if hash is present in URL
        if (window.location.hash) {
            const hash = window.location.hash;
            const targetElement = document.querySelector(hash);
            if (targetElement) {
                setTimeout(function() {
                    targetElement.scrollIntoView({ 
                        behavior: 'smooth', 
                        block: 'start' 
                    });
                    // Add highlight effect
                    targetElement.style.transition = 'box-shadow 0.3s ease';
                    targetElement.style.boxShadow = '0 8px 24px rgba(255, 77, 109, 0.3)';
                    setTimeout(function() {
                        targetElement.style.boxShadow = '';
                    }, 2000);
                }, 300);
            }
        }
    });
    
</script>
{% endblock %}
