{% extends "base.html" %}

{% block title %}Home - My Website{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/slider.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/home.css') }}">
{% endblock %}

{% block content %}
<!-- Full-Width Hero Slider -->
<section class="tv-plus-gallery">
        <div class="item-container" id="itemContainer">
        {% if slider_images %}
            {% for image in slider_images %}
            <div class="gallery-item" data-index="{{ loop.index0 }}">
                <img src="{{ image.imageUrl }}" alt="{{ image.alt or 'Slider Image' }}">
            </div>
            {% endfor %}
        {% else %}
            <!-- Fallback to default images if no slider images are configured -->
            <div class="gallery-item" data-index="0">
                <img src="{{ url_for('static', filename='images/1.jpeg') }}" alt="Slide 1">
            </div>
            <div class="gallery-item" data-index="1">
                <img src="{{ url_for('static', filename='images/2.jpeg') }}" alt="Slide 2">
            </div>
            <div class="gallery-item" data-index="2">
                <img src="{{ url_for('static', filename='images/7.jpg') }}" alt="Slide 3">
            </div>
            <div class="gallery-item" data-index="3">
                <img src="{{ url_for('static', filename='images/4.jpg') }}" alt="Slide 4">
            </div>
            <div class="gallery-item" data-index="4">
                <img src="{{ url_for('static', filename='images/5.jpg') }}" alt="Slide 5">
            </div>
            <div class="gallery-item" data-index="5">
                <img src="{{ url_for('static', filename='images/6.jpg') }}" alt="Slide 6">
            </div>
        {% endif %}
    </div>
    
    <!-- Dot Indicators -->
    <div class="slide-control">
        <button class="play-pause-btn" onclick="toggleAutoPlay()">
            <img id="playPauseIcon" src="{{ url_for('static', filename='images/slider/pause.png') }}" alt="Pause"/>
        </button>
        <div class="progress-dots" id="progressDots">
            {% if slider_images %}
                {% for image in slider_images %}
                <span class="dot {% if loop.index0 == 0 %}active{% endif %}" onclick="goToSlide({{ loop.index0 }})"></span>
                {% endfor %}
            {% else %}
                <!-- Fallback dots -->
                <span class="dot active" onclick="goToSlide(0)"></span>
                <span class="dot" onclick="goToSlide(1)"></span>
                <span class="dot" onclick="goToSlide(2)"></span>
                <span class="dot" onclick="goToSlide(3)"></span>
                <span class="dot" onclick="goToSlide(4)"></span>
                <span class="dot" onclick="goToSlide(5)"></span>
            {% endif %}
        </div>
    </div>
</section>

<!-- Information Section Below Slider -->
<div class="home-main-container">
    <section class="info-section">
        <div class="info-content">
            <div class="website-title">
                <h1 data-lang-home="title">‡§∏‡§Ç‡§§ ‡§≠‡§ó‡§§ ‡§∞‡§æ‡§Æ ‡§ß‡§æ‡§∞‡•ç‡§Æ‡§ø‡§ï ‡§∏‡•á‡§µ‡§æ ‡§∏‡§Ç‡§∏‡•ç‡§•‡§æ‡§® ‡§ö‡§ø‡§§‡•å‡§°‡§º‡§ó‡§¢‡§º</h1>
                <p class="subtitle" data-lang-home="subtitle">‡§∏‡§Æ‡§æ‡§ú ‡§∏‡•á‡§µ‡§æ ‡§î‡§∞ ‡§ß‡§æ‡§∞‡•ç‡§Æ‡§ø‡§ï ‡§ï‡§æ‡§∞‡•ç‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§Æ‡§∞‡•ç‡§™‡§ø‡§§</p>
            </div>

            <div class="objectives-section">
                <div class="objectives-header">
                    <h2 data-lang-home="objectives">‡§â‡§¶‡•ç‡§¶‡•á‡§∂‡•ç‡§Ø</h2>
                </div>
                
                <div class="objectives-scroller">
                    <ul class="objectives-list">
                        <li class="objective-item">
                            <p class="objective-text" data-lang-home="objective1">‡§™‡•Ä‡§°‡§º‡§ø‡§§ ‡§Æ‡§æ‡§®‡§µ‡§§‡§æ ‡§ï‡•Ä ‡§π‡§∞ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§∏‡•á ‡§∏‡•á‡§µ‡§æ ‡§ï‡§∞‡§®‡§æ ‡§ú‡•ã ‡§ï‡§ø ‡§¨‡§ø‡§®‡§æ ‡§ï‡§ø‡§∏‡•Ä ‡§ß‡§∞‡•ç‡§Æ ‡§ú‡§æ‡§§‡§ø ‡§≤‡§ø‡§Ç‡§ó ‡§∏‡§æ‡§Æ‡§æ‡§ú‡§ø‡§ï ‡§™‡•ç‡§∞‡§§‡§ø‡§∑‡•ç‡§†‡§æ ‡§è‡§µ‡§Ç ‡§ß‡§∞‡•ç‡§Æ ‡§ï‡•á ‡§≠‡•á‡§¶‡§≠‡§æ‡§µ ‡§ï‡•á ‡§¨‡§ø‡§®‡§æ ‡§ï‡•Ä ‡§ú‡§æ‡§µ‡•á‡§ó‡•Ä‡•§</p>
                        </li>
                        <li class="objective-item">
                            <p class="objective-text" data-lang-home="objective2">‡§¨‡•Ä‡§Æ‡§æ‡§∞ ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•Ä ‡§ö‡§ø‡§ï‡§ø‡§§‡•ç‡§∏‡§æ ‡§è‡§µ‡§Ç ‡§∏‡•á‡§µ‡§æ ‡§ï‡§∞‡§®‡§æ ‡§è‡§µ‡§Ç ‡§á‡§∏‡§Æ‡•á‡§Ç ‡§∏‡§π‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§®‡§æ‡•§</p>
                        </li>
                        <li class="objective-item">
                            <p class="objective-text" data-lang-home="objective3">‡§Ö‡§∏‡•ç‡§™‡§§‡§æ‡§≤ ‡§¨‡§®‡§æ‡§®‡§æ ‡§è‡§µ‡§Ç ‡§∏‡§Ç‡§ö‡§æ‡§≤‡§® ‡§ï‡§∞‡§®‡§æ ‡§ö‡§ø‡§ï‡§ø‡§§‡•ç‡§∏‡§æ ‡§∏‡•á ‡§∏‡§Ç‡§¨‡§Ç‡§ß‡§ø‡§§ ‡§≠‡§µ‡§® ‡§®‡§ø‡§∞‡•ç‡§Æ‡§æ‡§£ ‡§ï‡§∞‡§®‡§æ ‡§á‡§§‡•ç‡§Ø‡§æ‡§¶‡§ø‡•§</p>
                        </li>
                        <li class="objective-item">
                            <p class="objective-text" data-lang-home="objective4">‡§ö‡§ø‡§ï‡§ø‡§§‡•ç‡§∏‡§æ‡§≤‡§Ø ‡§Æ‡•á‡§Ç ‡§≠‡§∞‡•ç‡§§‡•Ä ‡§∞‡•ã‡§ó‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§≠‡•ã‡§ú‡§® ‡§µ‡•ç‡§Ø‡§µ‡§∏‡•ç‡§•‡§æ ‡§ï‡§∞‡§®‡§æ ‡§ú‡§π‡§æ‡§Ç ‡§∞‡§æ‡§ú‡•ç‡§Ø ‡§ï‡•á ‡§§‡•å‡§∞ ‡§™‡§∞ ‡§∏‡•Å‡§µ‡§ø‡§ß‡§æ ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§</p>
                        </li>
                        <li class="objective-item">
                            <p class="objective-text" data-lang-home="objective5">‡§Ü‡§¶‡§ø‡§µ‡§æ‡§∏‡•Ä ‡§è‡§µ‡§Ç ‡§ó‡•ç‡§∞‡§æ‡§Æ‡•Ä‡§£ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§®‡§ø‡§∂‡•Å‡§≤‡•ç‡§ï ‡§™‡•å‡§∑‡•ç‡§ü‡§ø‡§ï ‡§Ü‡§π‡§æ‡§∞ ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§ï‡§∞‡§æ‡§®‡§æ‡•§</p>
                        </li>
                        <li class="objective-item">
                            <p class="objective-text" data-lang-home="objective6">‡§Ü‡§¶‡§ø‡§µ‡§æ‡§∏‡•Ä ‡§è‡§µ‡§Ç ‡§ó‡•ç‡§∞‡§æ‡§Æ‡•Ä‡§£ ‡§è‡§µ‡§Ç ‡§∂‡§π‡§∞‡•Ä ‡§ó‡§∞‡•Ä‡§¨‡•ã‡§Ç ‡§Ö‡§®‡•Å‡§∏‡•Ç‡§ö‡§ø‡§§ ‡§ú‡§æ‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ú‡§®‡§ú‡§æ‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§µ‡§ø‡§≠‡§ø‡§®‡•ç‡§® ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§ï‡•á ‡§™‡•ç‡§∞‡§∂‡§ø‡§ï‡•ç‡§∑‡§£‡§æ‡§§‡•ç‡§Æ‡§ï ‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞‡•ã‡§Ç ‡§ï‡§æ ‡§∏‡§Ç‡§ö‡§æ‡§≤‡§® ‡§è‡§µ‡§Ç ‡§®‡§ø‡§∞‡•ç‡§¶‡•á‡§∂‡§® ‡§ï‡§∞‡§®‡§æ‡•§</p>
                        </li>
                        
                        <li class="objective-item">
                            <p class="objective-text" data-lang-home="objective1">‡§™‡•Ä‡§°‡§º‡§ø‡§§ ‡§Æ‡§æ‡§®‡§µ‡§§‡§æ ‡§ï‡•Ä ‡§π‡§∞ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§∏‡•á ‡§∏‡•á‡§µ‡§æ ‡§ï‡§∞‡§®‡§æ ‡§ú‡•ã ‡§ï‡§ø ‡§¨‡§ø‡§®‡§æ ‡§ï‡§ø‡§∏‡•Ä ‡§ß‡§∞‡•ç‡§Æ ‡§ú‡§æ‡§§‡§ø ‡§≤‡§ø‡§Ç‡§ó ‡§∏‡§æ‡§Æ‡§æ‡§ú‡§ø‡§ï ‡§™‡•ç‡§∞‡§§‡§ø‡§∑‡•ç‡§†‡§æ ‡§è‡§µ‡§Ç ‡§ß‡§∞‡•ç‡§Æ ‡§ï‡•á ‡§≠‡•á‡§¶‡§≠‡§æ‡§µ ‡§ï‡•á ‡§¨‡§ø‡§®‡§æ ‡§ï‡•Ä ‡§ú‡§æ‡§µ‡•á‡§ó‡•Ä‡•§</p>
                        </li>
                        <li class="objective-item">
                            <p class="objective-text" data-lang-home="objective2">‡§¨‡•Ä‡§Æ‡§æ‡§∞ ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•Ä ‡§ö‡§ø‡§ï‡§ø‡§§‡•ç‡§∏‡§æ ‡§è‡§µ‡§Ç ‡§∏‡•á‡§µ‡§æ ‡§ï‡§∞‡§®‡§æ ‡§è‡§µ‡§Ç ‡§á‡§∏‡§Æ‡•á‡§Ç ‡§∏‡§π‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§®‡§æ‡•§</p>
                        </li>
                        <li class="objective-item">
                            <p class="objective-text" data-lang-home="objective3">‡§Ö‡§∏‡•ç‡§™‡§§‡§æ‡§≤ ‡§¨‡§®‡§æ‡§®‡§æ ‡§è‡§µ‡§Ç ‡§∏‡§Ç‡§ö‡§æ‡§≤‡§® ‡§ï‡§∞‡§®‡§æ ‡§ö‡§ø‡§ï‡§ø‡§§‡•ç‡§∏‡§æ ‡§∏‡•á ‡§∏‡§Ç‡§¨‡§Ç‡§ß‡§ø‡§§ ‡§≠‡§µ‡§® ‡§®‡§ø‡§∞‡•ç‡§Æ‡§æ‡§£ ‡§ï‡§∞‡§®‡§æ ‡§á‡§§‡•ç‡§Ø‡§æ‡§¶‡§ø‡•§</p>
                        </li>
                        <li class="objective-item">
                            <p class="objective-text" data-lang-home="objective4">‡§ö‡§ø‡§ï‡§ø‡§§‡•ç‡§∏‡§æ‡§≤‡§Ø ‡§Æ‡•á‡§Ç ‡§≠‡§∞‡•ç‡§§‡•Ä ‡§∞‡•ã‡§ó‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§≠‡•ã‡§ú‡§® ‡§µ‡•ç‡§Ø‡§µ‡§∏‡•ç‡§•‡§æ ‡§ï‡§∞‡§®‡§æ ‡§ú‡§π‡§æ‡§Ç ‡§∞‡§æ‡§ú‡•ç‡§Ø ‡§ï‡•á ‡§§‡•å‡§∞ ‡§™‡§∞ ‡§∏‡•Å‡§µ‡§ø‡§ß‡§æ ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§</p>
                        </li>
                        <li class="objective-item">
                            <p class="objective-text" data-lang-home="objective5">‡§Ü‡§¶‡§ø‡§µ‡§æ‡§∏‡•Ä ‡§è‡§µ‡§Ç ‡§ó‡•ç‡§∞‡§æ‡§Æ‡•Ä‡§£ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§®‡§ø‡§∂‡•Å‡§≤‡•ç‡§ï ‡§™‡•å‡§∑‡•ç‡§ü‡§ø‡§ï ‡§Ü‡§π‡§æ‡§∞ ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§ï‡§∞‡§æ‡§®‡§æ‡•§</p>
                        </li>
                        <li class="objective-item">
                            <p class="objective-text" data-lang-home="objective6">‡§Ü‡§¶‡§ø‡§µ‡§æ‡§∏‡•Ä ‡§è‡§µ‡§Ç ‡§ó‡•ç‡§∞‡§æ‡§Æ‡•Ä‡§£ ‡§è‡§µ‡§Ç ‡§∂‡§π‡§∞‡•Ä ‡§ó‡§∞‡•Ä‡§¨‡•ã‡§Ç ‡§Ö‡§®‡•Å‡§∏‡•Ç‡§ö‡§ø‡§§ ‡§ú‡§æ‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ú‡§®‡§ú‡§æ‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§µ‡§ø‡§≠‡§ø‡§®‡•ç‡§® ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§ï‡•á ‡§™‡•ç‡§∞‡§∂‡§ø‡§ï‡•ç‡§∑‡§£‡§æ‡§§‡•ç‡§Æ‡§ï ‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞‡•ã‡§Ç ‡§ï‡§æ ‡§∏‡§Ç‡§ö‡§æ‡§≤‡§® ‡§è‡§µ‡§Ç ‡§®‡§ø‡§∞‡•ç‡§¶‡•á‡§∂‡§® ‡§ï‡§∞‡§®‡§æ‡•§</p>
                        </li>
                    </ul>
            </div>
        </div>
    </section>
</div>

<div class="after-slider-marquee">
    <marquee loop="infinite" behaviour="scroll" data-lang-marquee>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
     üôè ‡§∏‡§≠‡•Ä ‡§∂‡•ç‡§∞‡§¶‡•ç‡§ß‡§æ‡§≤‡•Å‡§ú‡§® ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§¶‡•á‡§Ç! ‡§≠‡§ú‡§® ‡§∏‡§Ç‡§ß‡•ç‡§Ø‡§æ ‡§ï‡§æ ‡§Ü‡§Ø‡•ã‡§ú‡§® ‡§¶‡§ø‡§®‡§æ‡§Ç‡§ï 28 ‡§Æ‡§à, ‡§Æ‡§Ç‡§ó‡§≤‡§µ‡§æ‡§∞ ‡§ï‡•ã ‡§∂‡§æ‡§Æ 7:00 ‡§¨‡§ú‡•á ‡§∏‡•á 10:00 ‡§¨‡§ú‡•á ‡§§‡§ï ‡§∂‡•ç‡§∞‡•Ä ‡§∞‡§æ‡§Æ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ, ‡§ö‡§ø‡§§‡•ç‡§§‡•å‡§°‡§º‡§ó‡§¢‡§º ‡§Æ‡•á‡§Ç ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§è‡§ó‡§æ‡•§ ‡§∏‡§æ‡§¶‡§∞ ‡§Ü‡§Æ‡§Ç‡§§‡•ç‡§∞‡§£ üôè 
      &nbsp;&nbsp;&nbsp;&nbsp;
     üôè ‡§∏‡§≠‡•Ä ‡§∂‡•ç‡§∞‡§¶‡•ç‡§ß‡§æ‡§≤‡•Å‡§ú‡§® ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§¶‡•á‡§Ç! ‡§≠‡§ú‡§® ‡§∏‡§Ç‡§ß‡•ç‡§Ø‡§æ ‡§ï‡§æ ‡§Ü‡§Ø‡•ã‡§ú‡§® ‡§¶‡§ø‡§®‡§æ‡§Ç‡§ï 28 ‡§Æ‡§à, ‡§Æ‡§Ç‡§ó‡§≤‡§µ‡§æ‡§∞ ‡§ï‡•ã ‡§∂‡§æ‡§Æ 7:00 ‡§¨‡§ú‡•á ‡§∏‡•á 10:00 ‡§¨‡§ú‡•á ‡§§‡§ï ‡§∂‡•ç‡§∞‡•Ä ‡§∞‡§æ‡§Æ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ, ‡§ö‡§ø‡§§‡•ç‡§§‡•å‡§°‡§º‡§ó‡§¢‡§º ‡§Æ‡•á‡§Ç ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§è‡§ó‡§æ‡•§ ‡§∏‡§æ‡§¶‡§∞ ‡§Ü‡§Æ‡§Ç‡§§‡•ç‡§∞‡§£ üôè
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </marquee>
</div>

<!-- Latest From Blog Section -->
<section class="home-blog-section">
    <div class="home-blog-container">
        <div class="home-blog-header">
            <h2 data-lang-home="blogSectionTitle">Latest From Blog</h2>
            <p data-lang-home="blogSectionSubtitle">Stay updated with our latest activities and events</p>
        </div>
        
        <div class="home-blog-grid">
            {% if home_blogs %}
                {% for blog in home_blogs %}
                <a href="{{ url_for('blog_detail', blog_id=blog.id) }}" class="home-blog-card" aria-label="{{ blog.title }}">
                    <div class="home-blog-card-image">
                        {% if blog.image %}
                            <img src="{{ blog.image }}" alt="{{ blog.title }}">
                        {% else %}
                            <img src="{{ url_for('static', filename='images/1.jpeg') }}" alt="{{ blog.title }}">
                        {% endif %}
                    </div>
                    <div class="home-blog-card-content">
                        <div class="home-blog-card-meta">
                            <span class="home-blog-card-date" data-lang-blog="datePrefix">‡§¶‡§ø‡§®‡§æ‡§Ç‡§ï:</span>
                            <span class="home-blog-card-date-value" data-lang-blog-date-hi="{{ blog.date }}" data-lang-blog-date-en="{{ blog.dateEn or blog.date }}">{{ blog.date }}</span>
                            <span class="home-blog-card-category" data-lang-blog-category-hi="{{ blog.category }}" data-lang-blog-category-en="{{ blog.categoryEn or blog.category }}">{{ blog.category }}</span>
                        </div>
                        <h3 class="home-blog-card-title" data-lang-blog-title-hi="{{ blog.title }}" data-lang-blog-title-en="{{ blog.titleEn or blog.title }}">{{ blog.title }}</h3>
                        <p class="home-blog-card-excerpt" data-lang-blog-excerpt-hi="{{ blog.excerpt }}" data-lang-blog-excerpt-en="{{ blog.excerptEn or blog.excerpt }}">{{ blog.excerpt }}</p>
                    </div>
                </a>
                {% endfor %}
            {% else %}
                <div class="home-blog-empty">No blogs available yet. Check back soon!</div>
            {% endif %}
        </div>
        
        <div class="home-blog-view-all">
            <a href="{{ url_for('blog') }}" class="view-all-btn" data-lang-home="viewAllBlogs">View All Blogs ‚Üí</a>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/slider.js') }}"></script>
<script>
    // Objectives slider touch and scroll handling
    document.addEventListener('DOMContentLoaded', function() {
        const objectivesList = document.querySelector('.objectives-list');
        const objectivesScroller = document.querySelector('.objectives-scroller');
        let touchTimeout = null;
        let isPaused = false;
        let isManuallyPaused = false; // Track manual pause state
        let touchStartTime = 0;
        let touchStartY = 0;
        let hasMoved = false;

        if (objectivesList && objectivesScroller) {
            // Ensure overflow is hidden for animation to work
            objectivesScroller.style.overflow = 'hidden';

            // Detect if mobile
            const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent) || window.innerWidth <= 768;

            // Touch start - track if it's a tap or scroll
            objectivesScroller.addEventListener('touchstart', function(e) {
                touchStartTime = Date.now();
                touchStartY = e.touches[0].clientY;
                hasMoved = false;
                
                // Only auto-pause if not manually paused
                if (!isManuallyPaused) {
                    objectivesList.style.animationPlayState = 'paused';
                    objectivesList.classList.add('touch-active');
                    isPaused = true;
                    
                    // Clear any existing timeout
                    if (touchTimeout) {
                        clearTimeout(touchTimeout);
                    }
                }
            }, { passive: true });

            // Touch move - detect if user is scrolling
            objectivesScroller.addEventListener('touchmove', function(e) {
                const touchY = e.touches[0].clientY;
                if (Math.abs(touchY - touchStartY) > 5) {
                    hasMoved = true; // User is scrolling, not tapping
                }
                
                if (!isManuallyPaused && !isPaused) {
                    objectivesList.style.animationPlayState = 'paused';
                    objectivesList.classList.add('touch-active');
                    isPaused = true;
                }
                
                // Reset the resume timeout (only if not manually paused)
                if (!isManuallyPaused) {
                    if (touchTimeout) {
                        clearTimeout(touchTimeout);
                    }
                    touchTimeout = setTimeout(function() {
                        objectivesList.style.animationPlayState = 'running';
                        objectivesList.classList.remove('touch-active');
                        isPaused = false;
                    }, 1500);
                }
            }, { passive: true });

            // Touch end - handle tap vs scroll
            objectivesScroller.addEventListener('touchend', function(e) {
                const touchDuration = Date.now() - touchStartTime;
                
                // If it's a quick tap (not a scroll) and on mobile, toggle
                if (isMobile && touchDuration < 300 && !hasMoved) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    if (isManuallyPaused) {
                        // Resume animation
                        objectivesList.style.animationPlayState = 'running';
                        objectivesList.classList.remove('touch-active');
                        isManuallyPaused = false;
                        isPaused = false;
                        // Clear any pending timeout
                        if (touchTimeout) {
                            clearTimeout(touchTimeout);
                            touchTimeout = null;
                        }
                    } else {
                        // Pause animation
                        objectivesList.style.animationPlayState = 'paused';
                        objectivesList.classList.add('touch-active');
                        isManuallyPaused = true;
                        isPaused = true;
                        // Clear any pending timeout
                        if (touchTimeout) {
                            clearTimeout(touchTimeout);
                            touchTimeout = null;
                        }
                    }
                } else {
                    // It was a scroll, not a tap - only auto-resume if not manually paused
                    if (!isManuallyPaused) {
                        if (touchTimeout) {
                            clearTimeout(touchTimeout);
                        }
                        
                        touchTimeout = setTimeout(function() {
                            objectivesList.style.animationPlayState = 'running';
                            objectivesList.classList.remove('touch-active');
                            isPaused = false;
                        }, 1500); // Resume after 1.5 seconds
                    }
                }
                
                // Reset tracking variables
                hasMoved = false;
                touchStartTime = 0;
            }, { passive: false });

            // Click handler as fallback (for devices that don't fire touchend properly)
            objectivesScroller.addEventListener('click', function(e) {
                if (isMobile) {
                    // Only handle if touchend didn't already handle it
                    const timeSinceTouch = Date.now() - touchStartTime;
                    if (timeSinceTouch > 300) {
                        e.preventDefault();
                        e.stopPropagation();
                        
                        if (isManuallyPaused) {
                            // Resume animation
                            objectivesList.style.animationPlayState = 'running';
                            objectivesList.classList.remove('touch-active');
                            isManuallyPaused = false;
                            isPaused = false;
                            if (touchTimeout) {
                                clearTimeout(touchTimeout);
                                touchTimeout = null;
                            }
                        } else {
                            // Pause animation
                            objectivesList.style.animationPlayState = 'paused';
                            objectivesList.classList.add('touch-active');
                            isManuallyPaused = true;
                            isPaused = true;
                            if (touchTimeout) {
                                clearTimeout(touchTimeout);
                                touchTimeout = null;
                            }
                        }
                    }
                }
            });

            // Mouse events for desktop hover
            objectivesScroller.addEventListener('mouseenter', function() {
                if (!isManuallyPaused) {
                    objectivesList.style.animationPlayState = 'paused';
                }
            });

            objectivesScroller.addEventListener('mouseleave', function() {
                if (!isPaused && !isManuallyPaused) {
                    objectivesList.style.animationPlayState = 'running';
                }
            });
        }
    });

</script>
{% endblock %}